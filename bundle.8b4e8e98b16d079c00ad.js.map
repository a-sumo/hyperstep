{"version":3,"file":"bundle.8b4e8e98b16d079c00ad.js","mappings":"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","sources":["webpack:///./src/coi-serviceworker.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand"],"sourcesContent":["/*! coi-serviceworker v0.1.6 - Guido Zuidhof, licensed under MIT */\nlet coepCredentialless = false;\nif (typeof window === 'undefined') {\n    self.addEventListener(\"install\", () => self.skipWaiting());\n    self.addEventListener(\"activate\", (event) => event.waitUntil(self.clients.claim()));\n\n    self.addEventListener(\"message\", (ev) => {\n        if (!ev.data) {\n            return;\n        } else if (ev.data.type === \"deregister\") {\n            self.registration\n                .unregister()\n                .then(() => {\n                    return self.clients.matchAll();\n                })\n                .then(clients => {\n                    clients.forEach((client) => client.navigate(client.url));\n                });\n        } else if (ev.data.type === \"coepCredentialless\") {\n            coepCredentialless = ev.data.value;\n        }\n    });\n\n    self.addEventListener(\"fetch\", function (event) {\n        const r = event.request;\n        if (r.cache === \"only-if-cached\" && r.mode !== \"same-origin\") {\n            return;\n        }\n\n        const request = (coepCredentialless && r.mode === \"no-cors\")\n            ? new Request(r, {\n                credentials: \"omit\",\n            })\n            : r;\n        event.respondWith(\n            fetch(request)\n                .then((response) => {\n                    if (response.status === 0) {\n                        return response;\n                    }\n\n                    const newHeaders = new Headers(response.headers);\n                    newHeaders.set(\"Cross-Origin-Embedder-Policy\",\n                        coepCredentialless ? \"credentialless\" : \"require-corp\"\n                    );\n                    newHeaders.set(\"Cross-Origin-Opener-Policy\", \"same-origin\");\n\n                    return new Response(response.body, {\n                        status: response.status,\n                        statusText: response.statusText,\n                        headers: newHeaders,\n                    });\n                })\n                .catch((e) => console.error(e))\n        );\n    });\n\n} else {\n    (() => {\n        // You can customize the behavior of this script through a global `coi` variable.\n        const coi = {\n            shouldRegister: () => true,\n            shouldDeregister: () => false,\n            coepCredentialless: () => false,\n            doReload: () => window.location.reload(),\n            quiet: false,\n            ...window.coi\n        };\n\n        const n = navigator;\n\n        if (n.serviceWorker && n.serviceWorker.controller) {\n            n.serviceWorker.controller.postMessage({\n                type: \"coepCredentialless\",\n                value: coi.coepCredentialless(),\n            });\n\n            if (coi.shouldDeregister()) {\n                n.serviceWorker.controller.postMessage({ type: \"deregister\" });\n            }\n        }\n\n        // If we're already coi: do nothing. Perhaps it's due to this script doing its job, or COOP/COEP are\n        // already set from the origin server. Also if the browser has no notion of crossOriginIsolated, just give up here.\n        if (window.crossOriginIsolated !== false || !coi.shouldRegister()) return;\n\n        if (!window.isSecureContext) {\n            !coi.quiet && console.log(\"COOP/COEP Service Worker not registered, a secure context is required.\");\n            return;\n        }\n\n        // In some environments (e.g. Chrome incognito mode) this won't be available\n        if (n.serviceWorker) {\n            n.serviceWorker.register(window.document.currentScript.src).then(\n                (registration) => {\n                    !coi.quiet && console.log(\"COOP/COEP Service Worker registered\", registration.scope);\n\n                    registration.addEventListener(\"updatefound\", () => {\n                        !coi.quiet && console.log(\"Reloading page to make use of updated COOP/COEP Service Worker.\");\n                        coi.doReload();\n                    });\n\n                    // If the registration is active, but it's not controlling the page\n                    if (registration.active && !n.serviceWorker.controller) {\n                        !coi.quiet && console.log(\"Reloading page to make use of COOP/COEP Service Worker.\");\n                        coi.doReload();\n                    }\n                },\n                (err) => {\n                    !coi.quiet && console.error(\"COOP/COEP Service Worker failed to register:\", err);\n                }\n            );\n        }\n    })();\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))"],"names":["coepCredentialless","window","self","addEventListener","skipWaiting","event","waitUntil","clients","claim","ev","data","type","registration","unregister","then","matchAll","forEach","client","navigate","url","value","r","request","cache","mode","Request","credentials","respondWith","fetch","response","status","newHeaders","Headers","headers","set","Response","body","statusText","catch","e","console","error","coi","shouldRegister","shouldDeregister","doReload","location","reload","quiet","n","navigator","serviceWorker","controller","postMessage","crossOriginIsolated","isSecureContext","register","document","currentScript","src","log","scope","active","err","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call"],"sourceRoot":""}